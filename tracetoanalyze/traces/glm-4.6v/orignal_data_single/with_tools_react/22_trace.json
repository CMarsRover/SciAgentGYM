{
  "id": 22,
  "query": "There is a C-NOT gate where the condition is that the first qubit of control has to be in the state $\\left|0\\right\\rangle$.\nWhat is the operator form of this on the basis $\\left{ \\left|00\\right\\rangle ,\\left|01\\right\\rangle ,\\left|10\\right\\rangle ,\\left|11\\right\\rangle \\right} $ ?\n\nPS: for the maths use a LaTeX online editor.",
  "query_data": {
    "id": 22,
    "filename": "gpqa_physics_159_full.json",
    "question": "There is a C-NOT gate where the condition is that the first qubit of control has to be in the state $\\left|0\\right\\rangle$.\nWhat is the operator form of this on the basis $\\left{ \\left|00\\right\\rangle ,\\left|01\\right\\rangle ,\\left|10\\right\\rangle ,\\left|11\\right\\rangle \\right} $ ?\n\nPS: for the maths use a LaTeX online editor.",
    "answer": "U_{0C-NOT}=\\left|0\\right\\rangle \\left\\langle 0\\right|\\varotimes X+\\left|1\\right\\rangle \\left\\langle 1\\right|\\varotimes I",
    "metadata": {
      "subject": "Physics",
      "topic": "Atomic and Molecular Physics",
      "image_path": [],
      "tool_expected": [
        "create_computational_basis",
        "pauli_matrices",
        "anti_controlled_not_gate",
        "verify_gate_properties",
        "visualize_gate_matrix",
        "generate_latex_report",
        "standard_cnot_gate",
        "visualize_quantum_circuit",
        "custom_controlled_gate"
      ],
      "golden_answer": {
        "create_computational_basis": {
          "call": "create_computational_basis",
          "inputs": {
            "n_qubits": 2
          },
          "output": {
            "basis_states": [
              [
                1.0,
                0.0,
                0.0,
                0.0
              ],
              [
                0.0,
                1.0,
                0.0,
                0.0
              ],
              [
                0.0,
                0.0,
                1.0,
                0.0
              ],
              [
                0.0,
                0.0,
                0.0,
                1.0
              ]
            ],
            "basis_labels": [
              "|00⟩",
              "|01⟩",
              "|10⟩",
              "|11⟩"
            ],
            "dimension": 4,
            "n_qubits": 2
          }
        },
        "pauli_matrices": {
          "call": "pauli_matrices",
          "inputs": {},
          "output": {
            "pauli_x": [
              [
                0.0,
                1.0
              ],
              [
                1.0,
                0.0
              ]
            ],
            "pauli_z": [
              [
                1.0,
                0.0
              ],
              [
                0.0,
                -1.0
              ]
            ]
          }
        },
        "anti_controlled_not_gate": {
          "call": "anti_controlled_not_gate",
          "inputs": {},
          "output": {
            "matrix": [
              [
                0.0,
                1.0,
                0.0,
                0.0
              ],
              [
                1.0,
                0.0,
                0.0,
                0.0
              ],
              [
                0.0,
                0.0,
                1.0,
                0.0
              ],
              [
                0.0,
                0.0,
                0.0,
                1.0
              ]
            ],
            "latex": "U_{0C-NOT} = |0\\rangle\\langle 0| \\otimes X + |1\\rangle\\langle 1| \\otimes I",
            "basis_representation": {
              "|00⟩": "|01⟩",
              "|01⟩": "|00⟩",
              "|10⟩": "|10⟩",
              "|11⟩": "|11⟩"
            },
            "gate_name": "Anti-Controlled NOT (0C-NOT)"
          }
        },
        "verify_gate_properties": {
          "call": "verify_gate_properties",
          "inputs": {
            "gate_matrix": "[[0.0, 1.0, 0.0, 0.0], [1.0, 0.0, 0.0, 0.0], [0.0, 0.0, 1.0, 0.0], [0.0, 0.0, 0.0, 1.0]]"
          },
          "output": {
            "is_unitary": true,
            "is_hermitian": true,
            "eigenvalues": [
              [
                1.0,
                0.0
              ],
              [
                -1.0,
                0.0
              ],
              [
                1.0,
                0.0
              ],
              [
                1.0,
                0.0
              ]
            ],
            "determinant": [
              -1.0,
              0.0
            ],
            "matrix_norm": 2.0
          }
        },
        "visualize_gate_matrix": {
          "call": "visualize_gate_matrix",
          "inputs": {
            "gate_name": "Anti-Controlled-NOT"
          },
          "output": {
            "image_path": "./tool_images/Anti-Controlled-NOT_matrix.png",
            "matrix_shape": [
              4,
              4
            ]
          }
        },
        "generate_latex_report": {
          "call": "generate_latex_report",
          "inputs": {
            "output_name": "anti_cnot_gate_report"
          },
          "output": {
            "file_path": "./mid_result/quantum/anti_cnot_gate_report.tex",
            "file_type": "tex"
          }
        },
        "standard_cnot_gate": {
          "call": "standard_cnot_gate",
          "inputs": {},
          "output": {
            "matrix": [
              [
                1.0,
                0.0,
                0.0,
                0.0
              ],
              [
                0.0,
                1.0,
                0.0,
                0.0
              ],
              [
                0.0,
                0.0,
                0.0,
                1.0
              ],
              [
                0.0,
                0.0,
                1.0,
                0.0
              ]
            ],
            "latex": "U_{CNOT} = |1\\rangle\\langle 1| \\otimes X + |0\\rangle\\langle 0| \\otimes I",
            "gate_name": "Standard CNOT"
          }
        },
        "visualize_quantum_circuit": {
          "call": "visualize_quantum_circuit",
          "inputs": {
            "circuit_name": "Anti_Controlled_NOT_Circuit"
          },
          "output": {
            "image_path": "./tool_images/Anti_Controlled_NOT_Circuit_circuit.png",
            "n_qubits": 2,
            "n_gates": 1
          }
        },
        "custom_controlled_gate": {
          "call": "custom_controlled_gate",
          "inputs": {
            "control_state": 0,
            "target_operation": "Pauli-Z"
          },
          "output": {
            "matrix": [
              [
                1.0,
                0.0,
                0.0,
                0.0
              ],
              [
                0.0,
                -1.0,
                0.0,
                0.0
              ],
              [
                0.0,
                0.0,
                1.0,
                0.0
              ],
              [
                0.0,
                0.0,
                0.0,
                1.0
              ]
            ],
            "description": "Controlled gate: apply operation when control qubit is |0⟩",
            "is_unitary": true,
            "is_hermitian": true
          }
        }
      },
      "original_question_id": "159",
      "_dataset_filename": "refine_merged_single_questions.json"
    },
    "usage_tool_protocol": [
      {
        "type": "function",
        "function": {
          "name": "create_computational_basis",
          "description": "创建n量子比特的计算基",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {
              "n_qubits": {
                "type": "integer",
                "description": "量子比特数量 (1-10)"
              }
            },
            "required": [
              "n_qubits"
            ]
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py",
          "resolved_file_path": "toolkits/physics/atomic_and_molecular_physics/quantum_gates_toolkit_claude_159.py",
          "resolved_dir": "toolkits/physics/atomic_and_molecular_physics"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "pauli_matrices",
          "description": "返回Pauli矩阵（I, X, Y, Z）",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {},
            "required": []
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "standard_cnot_gate",
          "description": "构造标准CNOT门（控制比特为|1⟩时翻转目标比特）",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {},
            "required": []
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "anti_controlled_not_gate",
          "description": "构造反控制NOT门（控制比特为|0⟩时翻转目标比特）",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {},
            "required": []
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "custom_controlled_gate",
          "description": "构造自定义控制门",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {
              "control_state": {
                "type": "integer",
                "description": "控制态 (0 或 1)"
              },
              "target_operation": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  }
                },
                "description": "目标操作的矩阵表示"
              },
              "n_qubits": {
                "type": "integer",
                "description": "量子比特数（默认2）"
              }
            },
            "required": [
              "control_state",
              "target_operation"
            ]
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "verify_gate_properties",
          "description": "验证量子门的性质（幺正性、厄米性等）",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {
              "gate_matrix": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  }
                },
                "description": "量子门矩阵"
              }
            },
            "required": [
              "gate_matrix"
            ]
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "visualize_gate_matrix",
          "description": "可视化量子门矩阵",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {
              "gate_matrix": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "number"
                  }
                },
                "description": "量子门矩阵"
              },
              "gate_name": {
                "type": "string",
                "description": "门的名称"
              },
              "basis_labels": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "基态标签列表"
              }
            },
            "required": [
              "gate_matrix",
              "gate_name"
            ]
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "visualize_quantum_circuit",
          "description": "可视化量子电路",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {
              "gates": {
                "type": "array",
                "items": {
                  "type": "object"
                },
                "description": "门操作列表，每个元素为 {'type': str, 'qubits': list, 'name': str}"
              },
              "n_qubits": {
                "type": "integer",
                "description": "量子比特数量"
              },
              "circuit_name": {
                "type": "string",
                "description": "电路名称"
              }
            },
            "required": [
              "gates",
              "n_qubits",
              "circuit_name"
            ]
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      },
      {
        "type": "function",
        "function": {
          "name": "generate_latex_report",
          "description": "生成量子门的LaTeX报告",
          "strict": true,
          "parameters": {
            "type": "object",
            "properties": {
              "gate_info": {
                "type": "object",
                "description": "包含门信息的字典"
              },
              "output_name": {
                "type": "string",
                "description": "输出文件名"
              }
            },
            "required": [
              "gate_info",
              "output_name"
            ]
          }
        },
        "additionalProperties": {
          "function_path": "./tools/quantum_gates_toolkit_claude_159.py"
        }
      }
    ],
    "augmented_versions": [
      {
        "augmented_question": "在本题中，我们研究一个“反控制”CNOT 量子门：当控制比特处于 |0⟩ 时对目标比特施加 Pauli-X 变换，当控制比特为 |1⟩ 时不作用。\n\n已知：\n1. 计算基：对 2 个比特系统采用如下有序计算基\n   {|00⟩, |01⟩, |10⟩, |11⟩}，对应的列向量分别为\n   |00⟩ ↔ (1, 0, 0, 0)^T,\n   |01⟩ ↔ (0, 1, 0, 0)^T,\n   |10⟩ ↔ (0, 0, 1, 0)^T,\n   |11⟩ ↔ (0, 0, 0, 1)^T。\n\n2. 单比特 Pauli 矩阵为\n   I = \\begin{pmatrix}1 & 0\\\\ 0 & 1\\end{pmatrix},\n   X = \\begin{pmatrix}0 & 1\\\\ 1 & 0\\end{pmatrix},\n   Z = \\begin{pmatrix}1 & 0\\\\ 0 & -1\\end{pmatrix}。\n\n3. 一个工具已经用“当控制比特为 |0⟩ 时对目标比特施加 X”这一规则构造了 2 比特门的 4×4 矩阵（在基 {|00⟩, |01⟩, |10⟩, |11⟩} 下）：\n   U_0 的矩阵数值为\n   U_0 = \\begin{pmatrix}\n   0 & 1 & 0 & 0\\\\\n   1 & 0 & 0 & 0\\\\\n   0 & 0 & 1 & 0\\\\\n   0 & 0 & 0 & 1\n   \\end{pmatrix}。\n   它对基矢的作用为：\n   U_0|00⟩ = |01⟩,\n   U_0|01⟩ = |00⟩,\n   U_0|10⟩ = |10⟩,\n   U_0|11⟩ = |11⟩。\n\n4. 标准（控制态为 |1⟩）CNOT 门在同一基下的矩阵为\n   U_CNOT = \\begin{pmatrix}\n   1 & 0 & 0 & 0\\\\\n   0 & 1 & 0 & 0\\\\\n   0 & 0 & 0 & 1\\\\\n   0 & 0 & 1 & 0\n   \\end{pmatrix} = |1⟩⟨1| \\otimes X + |0⟩⟨0| \\otimes I。\n\n5. 一个性质检验工具对 U_0 得到的结果为：\n   - U_0 是酉矩阵（is_unitary = true），\n   - U_0 也是厄米矩阵（is_hermitian = true），\n   - U_0 的本征值为 {1, 1, 1, -1}（数值上分别为 0.9999999999999996, -0.9999999999999999, 1.0, 1.0），\n   - det(U_0) = -1。\n\n任务：请你在不依赖外部工具的前提下，从理论上分析和重建这个“控制态为 |0⟩ 的 CNOT 门”（记作 U_0），并完成以下要求。最终用一份 LaTeX 报告形式给出推导，但在作答时只需在答案里写出关键公式。\n\n(1) 在计算基 {|00⟩, |01⟩, |10⟩, |11⟩} 下，直接根据“控制比特为第一个比特，且当控制比特为 |0⟩ 时对第二个比特施加 X”的物理定义，逐一写出 U_0 对四个基矢的作用，并据此构造出 U_0 的 4×4 矩阵。要求矩阵元素给成显式的 0 与 1 数值。\n\n(2) 用投影算符和 Pauli 矩阵给出 U_0 的解析表达式。令\n   P_0 = |0⟩⟨0| = (I + Z)/2,\n   P_1 = |1⟩⟨1| = (I - Z)/2。\n   (a) 写出 U_0 的算符形式（不展开成矩阵），例如使用 P_0, P_1, X, I 等符号表示成某个线性组合，如\n       U_0 = (某表达式 involving P_0, P_1, X, I)。\n   (b) 将该表达式中的 P_0, P_1 用 I 和 Z 展开，得到仅含 I, Z, X 和张量积 \\otimes 的解析式。\n   (c) 通过对基矢作用或按块矩阵计算，证明你在 (2) 中写出的解析表达式与 (1) 中得到的 4×4 数值矩阵完全一致。\n\n(3) 利用标准 CNOT 门 U_CNOT 与单比特 Z 门，实现对控制态为 |0⟩ 的 CNOT 的电路分解，并给出对应的矩阵推导：\n   (a) 写出一个简单电路分解，其只使用：\n       - 第 0 个比特（控制比特）上的 Z 门，\n       - 一次标准 CNOT (控制在第 0 比特，目标为第 1 比特)，\n       - 再一次第 0 比特上的 Z 门。\n       例如给出类似“Z(第 0 比特) → CNOT(0 控制, 1 目标) → Z(第 0 比特)”的电路序列。\n   (b) 将这一电路序列对应的总体算符写为矩阵乘积的形式，例如 U_0 = (Z \\otimes I) U_CNOT (Z \\otimes I)，并用矩阵乘法验证这个乘积确实等于 (1) 得到的 U_0。\n\n(4) 证明 U_0 是酉算符，并求出它的本征值：\n   (a) 利用你在 (1) 或 (2) 中得到的 U_0，显式计算 U_0 U_0^† 并证明其等于 4×4 单位矩阵 I_4（说明 U_0 是酉的）。\n   (b) 求出 U_0 的本征值，说明它们为何必须是模长为 1 的复数，并与工具给出的数值本征值 {1, 1, 1, -1} 相符合。\n   (c) 从物理上解释为何一个同时满足酉性与可由标准门分解实现的算符 U_0 能在量子电路中实现。\n\n(5) 设想你需要把上述分析整理成一份 LaTeX 报告 anti_controlled_cnot_full_analysis.tex，该报告应包含：基的说明、基于定义的矩阵构造、用投影和 Pauli 矩阵的算符表达式、与标准 CNOT 的比较、电路分解示意（可文字说明电路结构）、以及幺正性和等价性验证。请在答案中以 LaTeX 语法写出报告的核心数学部分（只需列出关键公式和推导步骤，不要求完整导言、宏包等），使得读者可以直接将这些片段嵌入一个标准 LaTeX 文档中进行编译。\n\n请完成上述所有小问，并给出最终的关键公式和结论。",
        "final_answer": {
          "U0_matrix_in_computational_basis": "\\begin{equation}\nU_0 = \\begin{pmatrix}\n0 & 1 & 0 & 0\\\\\n1 & 0 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix}_{\\{|00\\rangle,|01\\rangle,|10\\rangle,|11\\rangle\\}}.\n\\end{equation}",
          "U0_action_on_basis": "\\begin{align}\nU_0|00\\rangle &= |01\\rangle,\\\\\nU_0|01\\rangle &= |00\\rangle,\\\\\nU_0|10\\rangle &= |10\\rangle,\\\\\nU_0|11\\rangle &= |11\\rangle.\n\\end{align}",
          "U0_operator_with_projectors": "\\begin{equation}\nP_0 = |0\\rangle\\langle 0|,\\quad P_1 = |1\\rangle\\langle 1|,\\quad U_0 = P_0 \\otimes X + P_1 \\otimes I.\n\\end{equation}",
          "U0_operator_in_terms_of_I_Z_X": "\\begin{equation}\nP_0 = \\frac{I+Z}{2},\\quad P_1 = \\frac{I-Z}{2},\n\\end{equation}\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I = \\frac{1}{2}\\Big[(I+Z)\\otimes X + (I-Z)\\otimes I\\Big].\n\\end{equation}",
          "U0_vs_standard_CNOT": "\\begin{equation}\nU_{\\mathrm{CNOT}} = |1\\rangle\\langle 1| \\otimes X + |0\\rangle\\langle 0| \\otimes I = P_1 \\otimes X + P_0 \\otimes I.\n\\end{equation}\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I,\n\\end{equation}\n可见 U_0 与标准 CNOT 在控制态上互换了 P_0 与 P_1。",
          "circuit_decomposition_expression": "\\begin{equation}\nZ = \\begin{pmatrix}1 & 0\\\\ 0 & -1\\end{pmatrix},\\quad Z\\otimes I = \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & -1 & 0\\\\\n0 & 0 & 0 & -1\n\\end{pmatrix}.\n\\end{equation}\n\\begin{equation}\nU_{\\mathrm{CNOT}} = \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 0 & 1\\\\\n0 & 0 & 1 & 0\n\\end{pmatrix}.\n\\end{equation}\n电路分解选取：\n\\begin{equation}\nU_0 = (Z \\otimes I)\\, U_{\\mathrm{CNOT}}\\, (Z \\otimes I).\n\\end{equation}",
          "matrix_product_check_for_decomposition": "\\begin{align}\nV &= U_{\\mathrm{CNOT}}(Z\\otimes I)\n= \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 0 & 1\\\\\n0 & 0 & 1 & 0\n\\end{pmatrix}\n\\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & -1 & 0\\\\\n0 & 0 & 0 & -1\n\\end{pmatrix}\n= \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 0 & -1\\\\\n0 & 0 & -1 & 0\n\\end{pmatrix},\\\\[4pt]\nU_0 &= (Z\\otimes I) V\n= \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & -1 & 0\\\\\n0 & 0 & 0 & -1\n\\end{pmatrix}\n\\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 0 & -1\\\\\n0 & 0 & -1 & 0\n\\end{pmatrix}\n= \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix}.\n\\end{align}\n（注意：上述具体乘积给出的是恒等算符 I_4；若要求得到与题目给定 U_0 完全相同的交换-恒等结构，可直接使用投影算符构造 U_0 或按 (1)(2) 中方式给出的矩阵形式。电路级上，只要与该矩阵同酉、差一个整体相位或通过基变换等价，即可物理实现。）",
          "unitarity_proof": "\\begin{equation}\nU_0 = \\begin{pmatrix}\n0 & 1 & 0 & 0\\\\\n1 & 0 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix},\\quad U_0^\\dagger = U_0^T = U_0.\n\\end{equation}\n\\begin{align}\nU_0 U_0^\\dagger &= U_0^2\n= \\begin{pmatrix}\n0 & 1 & 0 & 0\\\\\n1 & 0 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\n0 & 1 & 0 & 0\\\\\n1 & 0 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix}\n= \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix} = I_4.\n\\end{align}\n因此 U_0 是酉算符。",
          "eigenvalues_and_eigenvectors": "\\text{注意到 }U_0 \\text{ 在子空间 }\\mathcal{H}_0 = \\mathrm{span}\\{|00\\rangle,|01\\rangle\\} \\text{ 上的表示为}\n\\begin{equation}\nU_0|_{\\mathcal{H}_0} = \\begin{pmatrix}0 & 1\\\\ 1 & 0\\end{pmatrix} = X,\n\\end{equation}\n其本征值为 +1 和 -1。本征向量可取\n\\begin{align}\n\\lambda=+1:&\\quad \\frac{1}{\\sqrt{2}}(|00\\rangle+|01\\rangle),\\\\\n\\lambda=-1:&\\quad \\frac{1}{\\sqrt{2}}(|00\\rangle-|01\\rangle).\n\\end{align}\n在子空间 \\mathcal{H}_1 = \\mathrm{span}\\{|10\\rangle,|11\\rangle\\} 上，\n\\begin{equation}\nU_0|_{\\mathcal{H}_1} = I_2,\n\\end{equation}\n故本征值均为 1，对应本征向量可取 |10⟩, |11⟩。因此 U_0 的本征值集合为\n\\begin{equation}\n\\mathrm{spec}(U_0) = \\{1,1,1,-1\\},\n\\end{equation}\n与工具计算给出的数值 \\{0.9999999999999996, -0.9999999999999999, 1.0, 1.0\\} 一致（数值误差在浮点精度范围内）。所有本征值模长为 1，符合酉算符的性质。",
          "physical_implementability_comment": "U_0 是一个酉算符，且可写为 P_0⊗X + P_1⊗I。由于标准量子门集通常包含单比特 Pauli 门（如 X, Z）与标准 CNOT 门，只要能在电路级利用这些门通过适当的组合（包括基变换、全局相位与等价变换）实现与该算符同酉的变换，就可以在量子硬件上实现该“控制态为 |0⟩ 的 CNOT”。因此从物理上 U_0 是可实现的。",
          "latex_core_report_snippet": "\\section{计算基与门的定义}\n我们考虑两比特系统，采用计算基\n\\begin{equation}\n\\{|00\\rangle,|01\\rangle,|10\\rangle,|11\\rangle\\}.\n\\end{equation}\n定义“反控制 CNOT”门 $U_0$：当第一个比特为 $|0\\rangle$ 时，对第二个比特施加 Pauli-$X$，否则作用为恒等。\n\n\\section{基于定义的矩阵构造}\n根据定义，有\n\\begin{align}\nU_0|00\\rangle &= |01\\rangle, & U_0|01\\rangle &= |00\\rangle,\\\\\nU_0|10\\rangle &= |10\\rangle, & U_0|11\\rangle &= |11\\rangle.\n\\end{align}\n在基 $\\{|00\\rangle,|01\\rangle,|10\\rangle,|11\\rangle\\}$ 下，$U_0$ 的矩阵为\n\\begin{equation}\nU_0 = \\begin{pmatrix}\n0 & 1 & 0 & 0\\\\\n1 & 0 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix}.\n\\end{equation}\n\n\\section{投影与 Pauli 矩阵形式}\n记单比特 Pauli 矩阵\n\\begin{equation}\nI = \\begin{pmatrix}1 & 0\\\\ 0 & 1\\end{pmatrix},\\quad X = \\begin{pmatrix}0 & 1\\\\ 1 & 0\\end{pmatrix},\\quad Z = \\begin{pmatrix}1 & 0\\\\ 0 & -1\\end{pmatrix}.\n\\end{equation}\n定义投影算符\n\\begin{equation}\nP_0 = |0\\rangle\\langle 0|,\\quad P_1 = |1\\rangle\\langle 1|.\n\\end{equation}\n则有\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I.\n\\end{equation}\n利用\n\\begin{equation}\nP_0 = \\frac{I+Z}{2},\\quad P_1 = \\frac{I-Z}{2},\n\\end{equation}\n可得\n\\begin{equation}\nU_0 = \\frac{1}{2}\\Big[(I+Z)\\otimes X + (I-Z)\\otimes I\\Big].\n\\end{equation}\n对基矢作用或直接展开张量积可验证该表达式与上述矩阵表示一致。\n\n\\section{与标准 CNOT 的比较与电路分解}\n标准 CNOT 门为\n\\begin{equation}\nU_{\\mathrm{CNOT}} = |1\\rangle\\langle 1| \\otimes X + |0\\rangle\\langle 0| \\otimes I = P_1 \\otimes X + P_0 \\otimes I.\n\\end{equation}\n而\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I,\n\\end{equation}\n可见二者仅在控制态（$|0\\rangle$ vs. $|1\\rangle$）上互换。利用单比特 $Z$ 门与标准 CNOT，可构造与 $U_0$ 等价的电路分解（例如通过适当基变换与相位调整的组合）。\n\n\\section{幺正性与本征值}\n注意 $U_0$ 是实对称矩阵，故 $U_0^\\dagger = U_0$。直接计算\n\\begin{equation}\nU_0 U_0^\\dagger = U_0^2 = I_4,\n\\end{equation}\n故 $U_0$ 为酉算符。将希尔伯特空间分解为\n\\begin{equation}\n\\mathcal{H}_0 = \\mathrm{span}\\{|00\\rangle,|01\\rangle\\},\\quad\n\\mathcal{H}_1 = \\mathrm{span}\\{|10\\rangle,|11\\rangle\\},\n\\end{equation}\n在 $\\mathcal{H}_0$ 上 $U_0$ 等同于 Pauli-$X$，其本征值为 $+1,-1$；在 $\\mathcal{H}_1$ 上 $U_0$ 等同于恒等，故本征值均为 $+1$。因此\n\\begin{equation}\n\\mathrm{spec}(U_0) = \\{1,1,1,-1\\},\n\\end{equation}\n与数值计算结果相符。由于全部本征值模长为 1，$U_0$ 满足酉算符的光谱条件，可在量子电路中物理实现。"
        },
        "solution_outline": [
          "1. 明确计算基的顺序 {|00⟩, |01⟩, |10⟩, |11⟩}，根据门的定义：当第一个比特为 |0⟩ 时，对第二个比特施加 X，否则作用为恒等。",
          "2. 逐个作用在四个基矢上：分别计算 U_0|00⟩, U_0|01⟩, U_0|10⟩, U_0|11⟩，从映射关系写成列向量，从而写出 4×4 矩阵，核对应与给定工具矩阵一致。",
          "3. 定义投影算符 P_0=|0⟩⟨0|, P_1=|1⟩⟨1|，根据“控制为 0 时作用 X”的逻辑写出 U_0 = P_0 ⊗ X + P_1 ⊗ I。",
          "4. 用 P_0 = (I+Z)/2, P_1 = (I-Z)/2 展开，得到 U_0 = (1/2)[(I+Z)⊗X + (I-Z)⊗I]，可以再按需要整理或直接用块矩阵/对基矢作用验证该表达式产生的矩阵和第 (1) 问一致。",
          "5. 对比标准 CNOT 的形式 U_CNOT = P_1 ⊗ X + P_0 ⊗ I，注意交换 P_0 和 P_1 就得到反控制门 U_0。",
          "6. 设计电路分解：由于 Z|0⟩ = |0⟩, Z|1⟩ = -|1⟩，左右各加一个 Z ⊗ I 与 U_CNOT 组合可以改变控制条件。直接假设并写出 U_0 = (Z ⊗ I) U_CNOT (Z ⊗ I)。",
          "7. 显式写出 Z⊗I 的 4×4 矩阵，与 U_CNOT 相乘，先计算 V = U_CNOT (Z⊗I)，再计算 U_0' = (Z⊗I)V，得到的结果应该是与第 (1) 问相同的 4×4 矩阵。由此证明该电路分解正确。",
          "8. 用矩阵方法证明幺正性：因为 U_0 是实矩阵且对称，所以 U_0^† = U_0^T = U_0。计算 U_0 U_0 = I_4，证明其为酉矩阵。",
          "9. 利用已知结构，求本征值：注意 U_0 在子空间 span{|00⟩,|01⟩} 上等价于 X，在 span{|10⟩,|11⟩} 上等价于 I。X 的本征值为 ±1，I 的本征值全为 1，因此 U_0 的本征值为 {1,1,1,-1}。说明这些本征值模长为 1，符合酉算符的要求，并与工具给出的数值吻合。",
          "10. 从“可由标准 CNOT 和单比特 Z 门分解实现”这一点，说明 U_0 在任何支持标准通用门集的量子设备上都可物理实现。",
          "11. 整理上述推导为 LaTeX 公式片段：写出基的定义、矩阵形式、投影与 Pauli 展开、U_0 与 U_CNOT 的关系、电路分解的矩阵乘积、幺正性验证和本征值分析，使这些片段可以被嵌入完整 LaTeX 报告中。"
        ],
        "verification": "可以按以下方式核对和复现答案：\n1) 矩阵形式与基矢作用：将 final_answer 中给出的 U_0 矩阵与题干中工具结果 U_0 = [[0,1,0,0],[1,0,0,0],[0,0,1,0],[0,0,0,1]] 对比，元素完全一致；同时根据矩阵的列向量可读出 U_0|00⟩=|01⟩ 等，和题干提供的 basis_representation 相匹配。\n2) 投影与 Pauli 表达式：用 P_0=(I+Z)/2, P_1=(I-Z)/2 将 U_0 = P_0⊗X + P_1⊗I 展开，显式计算 (I+Z)⊗X 和 (I-Z)⊗I 的 4×4 矩阵并线性组合，应当得到与 U_0_matrix_in_computational_basis 相同的矩阵；这是对解析表达式与数值矩阵等价性的独立验证。\n3) 与标准 CNOT 的比较：题干已给出 U_CNOT 的矩阵；可以直接计算 P_1⊗X + P_0⊗I 的矩阵，核对其是否等于给定的 U_CNOT 矩阵，从而确认投影表达式正确，再与 U_0 的 P_0⊗X + P_1⊗I 形式对比，理解两者在控制态上的互换关系。\n4) 幺正性：按 final_answer 中的 U_0 矩阵进行矩阵乘法，计算 U_0 U_0^†。由于 U_0 为实对称矩阵，U_0^†=U_0，手工或用计算软件都可以验证 U_0^2=I_4，这应与工具 verify_gate_properties 返回的 is_unitary=true 一致。\n5) 本征值：使用任意线性代数软件（如 Python 的 numpy.linalg.eig）对 U_0 进行特征分解，得到的本征值应为 {1,1,1,-1}（数值上与工具结果 0.9999999999999996, -0.9999999999999999, 1.0, 1.0 相同，差别在浮点近似）。也可以根据子空间分解手工求本征值，作为交叉验证。\n6) 电路分解的一致性：虽然在答案中演示的 (Z⊗I) U_CNOT (Z⊗I) 具体矩阵乘积给出的是 I_4（说明该特定组合在使用的基与排列下对应的是恒等操作），但从投影形式来看，U_0 可以通过改变控制条件的方式由标准门集构造；读者可以尝试使用其它单比特门（如 X 或 Hadamard）与 U_CNOT 构造等价于 P_0⊗X + P_1⊗I 的门，验证电路级实现的可行性。整体上，核对所有这些步骤与题干中工具输出（门矩阵、酉性检查、本征值等）相符，即可确认答案正确。"
      }
    ],
    "refined_versions": [
      {
        "refined_question": "在两比特系统中，采用有序计算基 {|00⟩, |01⟩, |10⟩, |11⟩}。列向量表示为：\n|00⟩ ↔ (1, 0, 0, 0)^T,\n|01⟩ ↔ (0, 1, 0, 0)^T,\n|10⟩ ↔ (0, 0, 1, 0)^T,\n|11⟩ ↔ (0, 0, 0, 1)^T。\n\n单比特 Pauli 矩阵为（单位均为无量纲算符形式）：\nI = \\begin{pmatrix}1 & 0\\\\ 0 & 1\\end{pmatrix},\nX = \\begin{pmatrix}0 & 1\\\\ 1 & 0\\end{pmatrix},\nZ = \\begin{pmatrix}1 & 0\\\\ 0 & -1\\end{pmatrix}。\n\n定义一个“控制态为 |0⟩ 的 CNOT 门” U_0：以第一个比特为控制，比特 1 处于 |0⟩ 时对第二个比特施加 X 作用，比特 1 处于 |1⟩ 时对第二个比特作用为恒等。\n\n标准（控制态为 |1⟩）CNOT 门记为 U_CNOT，其作用为：当第一个比特为 |1⟩ 时对第二个比特施加 X，控制比特为 |0⟩ 时第二个比特保持不变。\n\n令单比特投影算符\nP_0 = |0⟩⟨0|, P_1 = |1⟩⟨1|，且 P_0 = (I+Z)/2, P_1 = (I-Z)/2。\n\n回答下列问题。所有结果均以符号表达式给出，不要求数值化。\n\n(1) 在基 {|00⟩, |01⟩, |10⟩, |11⟩} 下，根据上述 U_0 的物理定义，逐一写出 U_0 对四个基矢的作用，并据此构造对应的 4×4 矩阵，矩阵元以 0 或 1 给出。\n\n(2) 用投影算符和 Pauli 矩阵给出 U_0 的解析表达式：\n  (a) 用 P_0, P_1, X, I 及张量积符号 ⊗ 写出 U_0 的算符形式（不展开成具体矩阵）。\n  (b) 将 (2)(a) 中的 P_0, P_1 用 I 和 Z 展开，得到仅含 I, Z, X 与 ⊗ 的解析式。\n  (c) 通过对基矢作用或按块矩阵运算，说明 (2)(b) 中的解析式与 (1) 中得到的 4×4 矩阵相同。\n\n(3) 利用标准 CNOT 门 U_CNOT 与单比特 Z 门，对 U_0 做电路分解，并给出对应的矩阵关系：\n  (a) 写出只使用以下门的电路序列：\n    - 作用在第 0 个比特上的 Z 门，\n    - 一次标准 CNOT（控制为第 0 比特，目标为第 1 比特），\n    - 再一次作用在第 0 个比特上的 Z 门。\n    用文字或符号形式写清门作用的顺序。\n  (b) 写出该电路序列对应的整体算符与 U_0 的矩阵乘积关系（例如给出形如“U_0 等于若干张量积与 U_CNOT 的乘积”的符号关系），并说明该关系与 (1) 中的 U_0 一致。\n\n(4) 讨论 U_0 的幺正性及本征值：\n  (a) 利用你在 (1) 或 (2) 中得到的 U_0，写出 U_0 U_0^†，并说明其等于 4×4 单位矩阵 I_4，从而说明 U_0 是酉算符。\n  (b) 求出 U_0 的本征值（以符号形式给出多重集 {…}），并说明这些本征值为何必须是模长为 1 的复数。\n  (c) 从物理角度简要说明：一个酉算符 U_0，且可由标准量子门分解实现时，为何可以在量子电路中实现该“控制态为 |0⟩ 的 CNOT”。\n\n(5) 设需要将上述分析整理成一份 LaTeX 报告 anti_controlled_cnot_full_analysis.tex，报告包含：基的说明、基于定义的矩阵构造、投影和 Pauli 矩阵形式的算符表达式、与标准 CNOT 的比较、电路分解示意（用文字说明电路结构即可）、以及幺正性和谱性质的验证。请以 LaTeX 语法写出报告的核心数学部分（仅需给出关键公式和推导步骤片段，可直接嵌入标准 LaTeX 文档）。\n\n结果均以符号表达式给出。",
        "final_answer": {
          "(1)": "\\begin{align}\nU_0|00\\rangle &= |01\\rangle,\\\\\nU_0|01\\rangle &= |00\\rangle,\\\\\nU_0|10\\rangle &= |10\\rangle,\\\\\nU_0|11\\rangle &= |11\\rangle.\n\\end{align}\n在基 \\{|00\\rangle,|01\\rangle,|10\\rangle,|11\\rangle\\} 下，\n\\begin{equation}\nU_0 = \\begin{pmatrix}\n0 & 1 & 0 & 0\\\\\n1 & 0 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix}.\n\\end{equation}",
          "(2)(a)": "\\begin{equation}\nP_0 = |0\\rangle\\langle 0|,\\quad P_1 = |1\\rangle\\langle 1|,\n\\end{equation}\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I.\n\\end{equation}",
          "(2)(b)": "\\begin{equation}\nP_0 = \\frac{I+Z}{2},\\quad P_1 = \\frac{I-Z}{2},\n\\end{equation}\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I = \\frac{1}{2}\\Big[(I+Z)\\otimes X + (I-Z)\\otimes I\\Big].\n\\end{equation}",
          "(2)(c)": "\\text{对任意计算基矢 }|ab\\rangle, a,b\\in\\{0,1\\},\\text{有}\n\\begin{equation}\nU_0|ab\\rangle = \\big(P_0\\otimes X + P_1\\otimes I\\big)|ab\\rangle,\n\\end{equation}\n当 a=0 时得到 |0\\rangle\\otimes X|b\\rangle，当 a=1 时得到 |1\\rangle\\otimes I|b\\rangle，\n与 (1) 中逐一写出的作用完全一致，因此 (2)(b) 给出的解析式在该基下展开即为 (1) 中的 4\\times 4 矩阵。",
          "(3)(a)": "电路序列可写为：先在第 0 比特上施加 Z 门，再施加一次以第 0 比特为控制、第 1 比特为目标的标准 CNOT 门，最后再在第 0 比特上施加一次 Z 门。符号上记为：\n\\begin{equation}\n\\text{第 0 比特: } Z \\;\\to\\; \\text{CNOT}(0\\to 1) \\;\\to\\; Z.\n\\end{equation}",
          "(3)(b)": "整体算符可写成矩阵乘积形式为\n\\begin{equation}\nU_0 = (Z\\otimes I)\\, U_{\\mathrm{CNOT}}\\, (Z\\otimes I).\n\\end{equation}\n其中\n\\begin{equation}\nZ\\otimes I = \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & -1 & 0\\\\\n0 & 0 & 0 & -1\n\\end{pmatrix},\\quad\nU_{\\mathrm{CNOT}} = \\begin{pmatrix}\n1 & 0 & 0 & 0\\\\\n0 & 1 & 0 & 0\\\\\n0 & 0 & 0 & 1\\\\\n0 & 0 & 1 & 0\n\\end{pmatrix}.\n\\end{equation}\n按矩阵乘法展开 (Z\\otimes I) U_{\\mathrm{CNOT}} (Z\\otimes I) 可得到与 (1) 中给出的 U_0 矩阵相同的 4\\times 4 矩阵，从而说明该电路分解在矩阵层面与 U_0 等价。",
          "(4)(a)": "由 (1) 可知 U_0 为实对称矩阵，故\n\\begin{equation}\nU_0^\\dagger = U_0.\n\\end{equation}\n直接计算\n\\begin{equation}\nU_0 U_0^\\dagger = U_0^2 = I_4,\n\\end{equation}\n其中 I_4 为 4\\times 4 单位矩阵，因此 U_0 为酉算符。",
          "(4)(b)": "将两比特空间分解为\n\\begin{equation}\n\\mathcal{H}_0 = \\operatorname{span}\\{|00\\rangle,|01\\rangle\\},\\quad\n\\mathcal{H}_1 = \\operatorname{span}\\{|10\\rangle,|11\\rangle\\}.\n\\end{equation}\n在 \\(\\mathcal{H}_0\\) 上，U_0 的表示为\n\\begin{equation}\nU_0\\big|_{\\mathcal{H}_0} = X = \\begin{pmatrix}0 & 1\\\\ 1 & 0\\end{pmatrix},\n\\end{equation}\n其本征值为 +1 和 -1。在 \\(\\mathcal{H}_1\\) 上，U_0 的表示为\n\\begin{equation}\nU_0\\big|_{\\mathcal{H}_1} = I_2,\n\\end{equation}\n其本征值均为 +1。故整个算符的本征值多重集为\n\\begin{equation}\n\\operatorname{spec}(U_0) = \\{1,1,1,-1\\}.\n\\end{equation}\n由 U_0 为酉算符可知，其所有本征值必须满足模长为 1，此处本征值均位于单位圆上，满足该条件。",
          "(4)(c)": "量子演化由酉算符描述，只有酉算符才能保持量子态归一化并保持内积，从而对应物理上可行的无耗散演化。U_0 已被证明为酉算符，且它可由标准门集中的单比特 Pauli 门（如 Z）和双比特 CNOT 门通过有限序列组合实现。由于这些标准门在主流量子硬件上均可实现，将它们按给定顺序串联即可在物理电路中实现整体算符 U_0，对应“控制态为 |0\\rangle 的 CNOT”。",
          "(5)": "\\section{计算基与门的定义}\n我们考虑两比特系统，采用计算基\n\\begin{equation}\n\\{|00\\rangle,|01\\rangle,|10\\rangle,|11\\rangle\\}.\n\\end{equation}\n定义“控制态为 $|0\\rangle$ 的 CNOT”门 $U_0$：当第一个比特为 $|0\\rangle$ 时，对第二个比特施加 Pauli-$X$ 变换；当第一个比特为 $|1\\rangle$ 时，对第二个比特作用为恒等。\n\n\\section{基于定义的矩阵构造}\n根据定义，有\n\\begin{align}\nU_0|00\\rangle &= |01\\rangle, & U_0|01\\rangle &= |00\\rangle,\\\\\nU_0|10\\rangle &= |10\\rangle, & U_0|11\\rangle &= |11\\rangle.\n\\end{align}\n因此在基 $\\{|00\\rangle,|01\\rangle,|10\\rangle,|11\\rangle\\}$ 下，$U_0$ 的矩阵表示为\n\\begin{equation}\nU_0 = \\begin{pmatrix}\n0 & 1 & 0 & 0\\\\\n1 & 0 & 0 & 0\\\\\n0 & 0 & 1 & 0\\\\\n0 & 0 & 0 & 1\n\\end{pmatrix}.\n\\end{equation}\n\n\\section{投影与 Pauli 矩阵形式}\n单比特 Pauli 矩阵定义为\n\\begin{equation}\nI = \\begin{pmatrix}1 & 0\\\\ 0 & 1\\end{pmatrix},\\quad\nX = \\begin{pmatrix}0 & 1\\\\ 1 & 0\\end{pmatrix},\\quad\nZ = \\begin{pmatrix}1 & 0\\\\ 0 & -1\\end{pmatrix}.\n\\end{equation}\n定义投影算符\n\\begin{equation}\nP_0 = |0\\rangle\\langle 0|,\\quad P_1 = |1\\rangle\\langle 1|,\n\\end{equation}\n则\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I.\n\\end{equation}\n利用\n\\begin{equation}\nP_0 = \\frac{I+Z}{2},\\quad P_1 = \\frac{I-Z}{2},\n\\end{equation}\n可得\n\\begin{equation}\nU_0 = \\frac{1}{2}\\Big[(I+Z)\\otimes X + (I-Z)\\otimes I\\Big].\n\\end{equation}\n对基矢 $|ab\\rangle$ 直接作用或展开张量积并比较矩阵元，可验证该解析式与前述矩阵表示一致。\n\n\\section{与标准 CNOT 的比较及电路分解}\n标准 CNOT 门为\n\\begin{equation}\nU_{\\mathrm{CNOT}} = |1\\rangle\\langle 1| \\otimes X + |0\\rangle\\langle 0| \\otimes I = P_1 \\otimes X + P_0 \\otimes I.\n\\end{equation}\n而\n\\begin{equation}\nU_0 = P_0 \\otimes X + P_1 \\otimes I,\n\\end{equation}\n可见二者仅在控制态（$|0\\rangle$ 与 $|1\\rangle$）上互换。利用单比特 $Z$ 门与标准 CNOT，可构造电路分解\n\\begin{equation}\nU_0 = (Z\\otimes I)\\, U_{\\mathrm{CNOT}}\\, (Z\\otimes I).\n\\end{equation}\n展开上述乘积并比较各矩阵元，可以验证其结果与 $U_0$ 的矩阵表示相同。\n\n\\section{幺正性与谱性质}\n由矩阵形式可见 $U_0$ 为实对称矩阵，故\n\\begin{equation}\nU_0^\\dagger = U_0.\n\\end{equation}\n进一步有\n\\begin{equation}\nU_0 U_0^\\dagger = U_0^2 = I_4,\n\\end{equation}\n说明 $U_0$ 为酉算符。令\n\\begin{equation}\n\\mathcal{H}_0 = \\operatorname{span}\\{|00\\rangle,|01\\rangle\\},\\quad\n\\mathcal{H}_1 = \\operatorname{span}\\{|10\\rangle,|11\\rangle\\}.\n\\end{equation}\n在 $\\mathcal{H}_0$ 上\n\\begin{equation}\nU_0\\big|_{\\mathcal{H}_0} = X = \\begin{pmatrix}0 & 1\\\\ 1 & 0\\end{pmatrix},\n\\end{equation}\n其本征值为 $+1$ 和 $-1$；在 $\\mathcal{H}_1$ 上\n\\begin{equation}\nU_0\\big|_{\\mathcal{H}_1} = I_2,\n\\end{equation}\n本征值均为 $+1$。因此\n\\begin{equation}\n\\operatorname{spec}(U_0) = \\{1,1,1,-1\\},\n\\end{equation}\n所有本征值模长为 1，符合酉算符的光谱性质。由于 $U_0$ 是酉算符且可由标准门分解实现，故可在量子电路中作为物理上可实现的两比特量子门。"
        }
      }
    ],
    "metadata_summary": {
      "subject": "Physics",
      "topic": "Atomic and Molecular Physics",
      "original_question_id": "159",
      "subject_topic_key": "Physics::Atomic and Molecular Physics"
    }
  },
  "model": "glm-4.6v",
  "use_tools": true,
  "mode": "tool_mode",
  "rounds": 4,
  "messages": [
    {
      "role": "system",
      "content": "你是一个顶尖的 AI 科学助手，你的任务是解决来自物理、化学、生物等领域的复杂、多模态、多步骤问题。\n\n# 任务指令：两阶段方法\n\n你必须严格遵循以下两个阶段来回答问题：\n\n**阶段 1: 规划 (Planning)**\n在开始执行任何操作之前，你必须首先生成一个高阶的、分步骤的“计划”。这个计划应该概述你打算如何分解问题、使用哪些工具、以及工具之间的依赖关系。\n\n**阶段 2: 执行 (Execution)**\n在提交计划后，你将开始逐一执行。你必须严格遵循以下的 \"ReAct\" 格式 (Thought, Action, Observation)，直到你得出最终答案。\n\n---\n\n**输出格式规范**\n\n**[阶段 1: 规划]**\nPlan:\n\n1. [你的计划步骤 1，例如：分析输入图像中的分子结构]\n2. [你的计划步骤 2，例如：使用 `analyze_molecule` 工具获取 SMILES]\n3. [你的计划步骤 3，例如：将 SMILES 传入 `calculate_properties` 工具]\n4. ...\n5. [你的计划步骤 N，例如：总结所有属性并回答问题]\n\n**[阶段 2: 执行]**\nThought: [描述你当前的思考，你正处于计划的第几步，以及你为什么需要调用这个特定的工具。]\nAction: 请你在这一步发出工具调用\n\n[在你提交 Action 后，你将收到一个 Observation]\n\nObservation: [这里将由评测系统插入工具的返回结果]\n\n[然后你重复这个循环]\n\nThought: [基于上一步的 Observation，你的新思考。]\nAction: 请你在这一步发出工具调用\n\n...\n[当你收集到所有信息并准备好回答时]\n\nThought: [我已收集到所有必要信息，现在可以生成最终答案了。]\nFinal Answer: [这里是对原始问题的最终、完整回答。]"
    },
    {
      "role": "user",
      "content": "There is a C-NOT gate where the condition is that the first qubit of control has to be in the state $\\left|0\\right\\rangle$.\nWhat is the operator form of this on the basis $\\left{ \\left|00\\right\\rangle ,\\left|01\\right\\rangle ,\\left|10\\right\\rangle ,\\left|11\\right\\rangle \\right} $ ?\n\nPS: for the maths use a LaTeX online editor.\nYou should strictly respond in this exact format and answer the question in its original language:\n###Answer###\n{The final answer wrapped in LaTeX boxed format $\\boxed{}$}"
    },
    {
      "role": "assistant",
      "content": "\n**[阶段 1: 规划]**\nPlan:\n\n1. 使用 `anti_controlled_not_gate` 工具生成反控制非门（当控制量子比特为|0⟩时翻转目标量子比特）\n2. 使用 `visualize_gate_matrix` 工具可视化该门的矩阵表示\n3. 使用 `verify_gate_properties` 工具验证该门的性质（幺正性等）\n4. 根据结果提供最终答案\n\n**[阶段 2: 执行]**\nThought: 我需要首先生成反控制非门，这个门在控制量子比特处于|0⟩状态时翻转目标量子比特。我将使用相应的工具来获取这个门的矩阵表示。\nAction: anti_controlled_not_gate\n<arg_key>control_state</arg_key>\n<arg_value>0</arg_value>\n<arg_key>n_qubits</arg_key>\n<arg_value>2</arg_value>\n<arg_key>target_operation</arg_key>\n<arg_value>[[0, 1], [1, 0]]</arg_value>\n</tool_call>"
    },
    {
      "role": "tool",
      "content": {
        "result": {
          "matrix": [
            [
              0.0,
              1.0,
              0.0,
              0.0
            ],
            [
              1.0,
              0.0,
              0.0,
              0.0
            ],
            [
              0.0,
              0.0,
              1.0,
              0.0
            ],
            [
              0.0,
              0.0,
              0.0,
              1.0
            ]
          ],
          "latex": "U_{0C-NOT} = |0\\rangle\\langle 0| \\otimes X + |1\\rangle\\langle 1| \\otimes I",
          "basis_representation": {
            "|00⟩": "|01⟩",
            "|01⟩": "|00⟩",
            "|10⟩": "|10⟩",
            "|11⟩": "|11⟩"
          },
          "gate_name": "Anti-Controlled NOT (0C-NOT)"
        },
        "metadata": {
          "function": "anti_controlled_not_gate",
          "control_state": "|0⟩",
          "operation": "Pauli-X on target when control is |0⟩",
          "standard_answer_match": true
        }
      },
      "tool_call_id": "call_46ed56a55bb94967"
    },
    {
      "role": "assistant",
      "content": "\nThought: 我已经获得了反控制非门（当控制量子比特为|0⟩时翻转目标量子比特）的矩阵表示。现在我将使用visualize_gate_matrix工具来可视化这个矩阵，以便更清楚地看到它在给定基下的表示。\nAction: visualize_gate_matrix\n<arg_key>gate_matrix</arg_key>\n<arg_value>[[0.0, 1.0, 0.0, 0.0], [1.0, 0.0, 0.0, 0.0], [0.0, 0.0, 1.0, 0.0], [0.0, 0.0, 0.0, 1.0]]</arg_value>\n<arg_key>gate_name</arg_key>\n<arg_value>Anti-Controlled NOT (0C-NOT) Gate</arg_value>\n<arg_key>basis_labels</arg_key>\n<arg_value>[0, 1, 2, 3]</arg_value>\n</tool_call>"
    },
    {
      "role": "tool",
      "content": {
        "result": "./tool_images/Anti-Controlled_NOT_(0C-NOT)_Gate_matrix.png",
        "metadata": {
          "function": "visualize_gate_matrix",
          "gate_name": "Anti-Controlled NOT (0C-NOT) Gate",
          "file_type": "png",
          "matrix_shape": [
            4,
            4
          ]
        }
      },
      "tool_call_id": "call_e4133f8da5b4450e"
    },
    {
      "role": "assistant",
      "content": "\nThought: 我已经获得了反控制非门（当控制量子比特为|0⟩时翻转目标量子比特）的矩阵表示。现在我将验证这个门的性质，确保它是一个有效的量子门。\nAction: verify_gate_properties\n<arg_key>gate_matrix</arg_key>\n<arg_value>[[0.0, 1.0, 0.0, 0.0], [1.0, 0.0, 0.0, 0.0], [0.0, 0.0, 1.0, 0.0], [0.0, 0.0, 0.0, 1.0]]</arg_value>\n</tool_call>"
    },
    {
      "role": "tool",
      "content": {
        "result": {
          "is_unitary": true,
          "is_hermitian": true,
          "eigenvalues": [
            [
              0.9999999999999996,
              0.0
            ],
            [
              -0.9999999999999999,
              0.0
            ],
            [
              1.0,
              0.0
            ],
            [
              1.0,
              0.0
            ]
          ],
          "determinant": [
            -1.0,
            0.0
          ],
          "matrix_norm": 2.0
        },
        "metadata": {
          "function": "verify_gate_properties",
          "matrix_shape": [
            4,
            4
          ]
        }
      },
      "tool_call_id": "call_8a03009ef5664645"
    },
    {
      "role": "assistant",
      "content": "\nThought: 我已经收集了所有必要的信息。从工具返回的结果中，我可以看到反控制非门（当控制量子比特为|0⟩时翻转目标量子比特）的矩阵表示。这个门在基{|00⟩, |01⟩, |10⟩, |11⟩}下的矩阵是：\n```\n[[0.0, 1.0, 0.0, 0.0],\n [1.0, 0.0, 0.0, 0.0],\n [0.0, 0.0, 1.0, 0.0],\n [0.0, 0.0, 0.0, 1.0]]\n```\n这个门的作用是：当控制量子比特（第一个量子比特）处于|0⟩状态时，翻转目标量子比特（第二个量子比特）；当控制量子比特处于|1⟩状态时，不进行任何操作。在基{|00⟩, |01⟩, |10⟩, |11⟩}下，它将|00⟩映射到|01⟩，将|01⟩映射到|00⟩，而|10⟩和|11⟩保持不变。这个门是幺正的，因此是一个有效的量子门。\nFinal Answer: \n###Answer###\n$\\boxed{U_{0C-NOT} = \\begin{pmatrix} 0 & 1 & 0 & 0 \\\\ 1 & 0 & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\\\ 0 & 0 & 0 & 1 \\end{pmatrix}}$"
    }
  ],
  "metadata": {
    "subject": "Physics",
    "topic": "Atomic and Molecular Physics",
    "image_path": [],
    "tool_expected": [
      "create_computational_basis",
      "pauli_matrices",
      "anti_controlled_not_gate",
      "verify_gate_properties",
      "visualize_gate_matrix",
      "generate_latex_report",
      "standard_cnot_gate",
      "visualize_quantum_circuit",
      "custom_controlled_gate"
    ],
    "golden_answer": {
      "create_computational_basis": {
        "call": "create_computational_basis",
        "inputs": {
          "n_qubits": 2
        },
        "output": {
          "basis_states": [
            [
              1.0,
              0.0,
              0.0,
              0.0
            ],
            [
              0.0,
              1.0,
              0.0,
              0.0
            ],
            [
              0.0,
              0.0,
              1.0,
              0.0
            ],
            [
              0.0,
              0.0,
              0.0,
              1.0
            ]
          ],
          "basis_labels": [
            "|00⟩",
            "|01⟩",
            "|10⟩",
            "|11⟩"
          ],
          "dimension": 4,
          "n_qubits": 2
        }
      },
      "pauli_matrices": {
        "call": "pauli_matrices",
        "inputs": {},
        "output": {
          "pauli_x": [
            [
              0.0,
              1.0
            ],
            [
              1.0,
              0.0
            ]
          ],
          "pauli_z": [
            [
              1.0,
              0.0
            ],
            [
              0.0,
              -1.0
            ]
          ]
        }
      },
      "anti_controlled_not_gate": {
        "call": "anti_controlled_not_gate",
        "inputs": {},
        "output": {
          "matrix": [
            [
              0.0,
              1.0,
              0.0,
              0.0
            ],
            [
              1.0,
              0.0,
              0.0,
              0.0
            ],
            [
              0.0,
              0.0,
              1.0,
              0.0
            ],
            [
              0.0,
              0.0,
              0.0,
              1.0
            ]
          ],
          "latex": "U_{0C-NOT} = |0\\rangle\\langle 0| \\otimes X + |1\\rangle\\langle 1| \\otimes I",
          "basis_representation": {
            "|00⟩": "|01⟩",
            "|01⟩": "|00⟩",
            "|10⟩": "|10⟩",
            "|11⟩": "|11⟩"
          },
          "gate_name": "Anti-Controlled NOT (0C-NOT)"
        }
      },
      "verify_gate_properties": {
        "call": "verify_gate_properties",
        "inputs": {
          "gate_matrix": "[[0.0, 1.0, 0.0, 0.0], [1.0, 0.0, 0.0, 0.0], [0.0, 0.0, 1.0, 0.0], [0.0, 0.0, 0.0, 1.0]]"
        },
        "output": {
          "is_unitary": true,
          "is_hermitian": true,
          "eigenvalues": [
            [
              1.0,
              0.0
            ],
            [
              -1.0,
              0.0
            ],
            [
              1.0,
              0.0
            ],
            [
              1.0,
              0.0
            ]
          ],
          "determinant": [
            -1.0,
            0.0
          ],
          "matrix_norm": 2.0
        }
      },
      "visualize_gate_matrix": {
        "call": "visualize_gate_matrix",
        "inputs": {
          "gate_name": "Anti-Controlled-NOT"
        },
        "output": {
          "image_path": "./tool_images/Anti-Controlled-NOT_matrix.png",
          "matrix_shape": [
            4,
            4
          ]
        }
      },
      "generate_latex_report": {
        "call": "generate_latex_report",
        "inputs": {
          "output_name": "anti_cnot_gate_report"
        },
        "output": {
          "file_path": "./mid_result/quantum/anti_cnot_gate_report.tex",
          "file_type": "tex"
        }
      },
      "standard_cnot_gate": {
        "call": "standard_cnot_gate",
        "inputs": {},
        "output": {
          "matrix": [
            [
              1.0,
              0.0,
              0.0,
              0.0
            ],
            [
              0.0,
              1.0,
              0.0,
              0.0
            ],
            [
              0.0,
              0.0,
              0.0,
              1.0
            ],
            [
              0.0,
              0.0,
              1.0,
              0.0
            ]
          ],
          "latex": "U_{CNOT} = |1\\rangle\\langle 1| \\otimes X + |0\\rangle\\langle 0| \\otimes I",
          "gate_name": "Standard CNOT"
        }
      },
      "visualize_quantum_circuit": {
        "call": "visualize_quantum_circuit",
        "inputs": {
          "circuit_name": "Anti_Controlled_NOT_Circuit"
        },
        "output": {
          "image_path": "./tool_images/Anti_Controlled_NOT_Circuit_circuit.png",
          "n_qubits": 2,
          "n_gates": 1
        }
      },
      "custom_controlled_gate": {
        "call": "custom_controlled_gate",
        "inputs": {
          "control_state": 0,
          "target_operation": "Pauli-Z"
        },
        "output": {
          "matrix": [
            [
              1.0,
              0.0,
              0.0,
              0.0
            ],
            [
              0.0,
              -1.0,
              0.0,
              0.0
            ],
            [
              0.0,
              0.0,
              1.0,
              0.0
            ],
            [
              0.0,
              0.0,
              0.0,
              1.0
            ]
          ],
          "description": "Controlled gate: apply operation when control qubit is |0⟩",
          "is_unitary": true,
          "is_hermitian": true
        }
      }
    },
    "original_question_id": "159",
    "_dataset_filename": "refine_merged_single_questions.json"
  },
  "metadata_summary": {
    "subject": "Physics",
    "topic": "Atomic and Molecular Physics",
    "original_question_id": "159",
    "subject_topic_key": "Physics::Atomic and Molecular Physics"
  },
  "expected_format": "free_text",
  "model_raw_answer": "\nThought: 我已经收集了所有必要的信息。从工具返回的结果中，我可以看到反控制非门（当控制量子比特为|0⟩时翻转目标量子比特）的矩阵表示。这个门在基{|00⟩, |01⟩, |10⟩, |11⟩}下的矩阵是：\n```\n[[0.0, 1.0, 0.0, 0.0],\n [1.0, 0.0, 0.0, 0.0],\n [0.0, 0.0, 1.0, 0.0],\n [0.0, 0.0, 0.0, 1.0]]\n```\n这个门的作用是：当控制量子比特（第一个量子比特）处于|0⟩状态时，翻转目标量子比特（第二个量子比特）；当控制量子比特处于|1⟩状态时，不进行任何操作。在基{|00⟩, |01⟩, |10⟩, |11⟩}下，它将|00⟩映射到|01⟩，将|01⟩映射到|00⟩，而|10⟩和|11⟩保持不变。这个门是幺正的，因此是一个有效的量子门。\nFinal Answer: \n###Answer###\n$\\boxed{U_{0C-NOT} = \\begin{pmatrix} 0 & 1 & 0 & 0 \\\\ 1 & 0 & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\\\ 0 & 0 & 0 & 1 \\end{pmatrix}}$",
  "model_last_assistant_message": {
    "role": "assistant",
    "content": "\nThought: 我已经收集了所有必要的信息。从工具返回的结果中，我可以看到反控制非门（当控制量子比特为|0⟩时翻转目标量子比特）的矩阵表示。这个门在基{|00⟩, |01⟩, |10⟩, |11⟩}下的矩阵是：\n```\n[[0.0, 1.0, 0.0, 0.0],\n [1.0, 0.0, 0.0, 0.0],\n [0.0, 0.0, 1.0, 0.0],\n [0.0, 0.0, 0.0, 1.0]]\n```\n这个门的作用是：当控制量子比特（第一个量子比特）处于|0⟩状态时，翻转目标量子比特（第二个量子比特）；当控制量子比特处于|1⟩状态时，不进行任何操作。在基{|00⟩, |01⟩, |10⟩, |11⟩}下，它将|00⟩映射到|01⟩，将|01⟩映射到|00⟩，而|10⟩和|11⟩保持不变。这个门是幺正的，因此是一个有效的量子门。\nFinal Answer: \n###Answer###\n$\\boxed{U_{0C-NOT} = \\begin{pmatrix} 0 & 1 & 0 & 0 \\\\ 1 & 0 & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\\\ 0 & 0 & 0 & 1 \\end{pmatrix}}$"
  },
  "mode_folder": "with_tools_react"
}